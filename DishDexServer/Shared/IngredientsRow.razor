@page "/Ingredient"
@using System.Text.Json.Serialization
@inject HttpClient client
@inject NavigationManager nav

<MudGrid>
    @foreach (Meal m in MealList)
    {
        <MudItem xs="3" @onclick='() => nav.NavigateTo($"/Ingredient/{m.strIngredient}")'>
            @* 
            <!-- Can display images for the ingredients, but until lazyloading or similar implemented its outcommented -->
            <MudPaper Class="orange darken3 p-2 d-flex align-center justify-center mud-width-full rounded-0" Style="@($"background:{Colors.Orange.Darken3};")">
                <MudImage Src="@($"https://www.themealdb.com/images/ingredients/{m.strIngredient}-Small.png")" Width="100" Elevation="0" />
            </MudPaper>             
            *@
            <MudPaper Class="orange darken3 p-2 d-flex align-center justify-center mud-width-full rounded-0" Style="@($"background:{Colors.Orange.Darken3};")">
                <MudText Typo="Typo.body2"><b>@m.strIngredient</b></MudText>
            </MudPaper>
        </MudItem>
    }
</MudGrid>

@code{
    private List<Meal> MealList { get; set; }

    protected override async Task OnInitializedAsync()
    {
        MealList = new List<Meal>();

        var result = await client.GetFromJsonAsync<Root>("https://www.themealdb.com/api/json/v1/1/list.php?i=list");
        if (result != null)
        {
            MealList = result.meals;
        }
    }

    public class Meal
    {
        public string idIngredient { get; set; }
        public string strIngredient { get; set; }
        public string strDescription { get; set; }
        public object strType { get; set; }
    }

    public class Root
    {
        public List<Meal> meals { get; set; }
    }


}